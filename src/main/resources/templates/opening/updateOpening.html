<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Atualizar Vaga</title>
</head>

<body style="font-family: Arial, sans-serif; margin: 0; background-color: #f8f9fa;">

<header style="background-color: rgba(53, 135, 100, 0.84); color: white; padding: 10px;">
    <nav>
        <a href="/" style="color: white; text-decoration: none; padding: 8px 16px;">RhProject</a>
        <div>
            <a class="nav-link active" aria-current="page" href="/" style="color: white; text-decoration: none; padding: 8px 16px;">Home</a>
            <a class="nav-link" href="/funcionarios" style="color: white; text-decoration: none; padding: 8px 16px;">Funcionários</a>
            <a class="nav-link" href="/openings" style="color: white; text-decoration: none; padding: 8px 16px;">Listar Vagas</a>
            <a class="nav-link" href="/openings/register" style="color: white; text-decoration: none; padding: 8px 16px;">Cadastrar Vaga</a>
            <a class="nav-link" href="/logout" style="color: white; text-decoration: none; padding: 8px 16px;">Sair</a>
        </div>
    </nav>
</header>

<div style="max-width: 800px; margin: auto; padding: 20px;">
    <h1 style="color: rgba(53, 135, 100, 1);">Atualizar Vaga</h1>

    <form method="post" th:action="@{/openings/update/find}" style="margin-bottom: 20px;">
        <div style="margin-bottom: 10px;">
            <label for="openingId" style="font-weight: bold;">ID da Vaga:</label>
            <input type="number" id="openingId" name="openingId" required style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" />
        </div>

        <button type="submit" style="background-color: rgba(154, 136, 85, 0.8); color: white; padding: 10px 15px; border: none; border-radius: 4px;">Buscar Vaga</button>
    </form>

    <form method="post" th:action="@{/openings/update}" th:object="${openingDto}" th:if="${openingDto.openingId != null}">
        <input type="hidden" name="_method" value="put"/>

        <div style="margin-bottom: 10px;">
            <label for="openingId" style="font-weight: bold;">ID da Vaga:</label>
            <input type="number" id="openingId" th:field="*{openingId}" required readonly style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" />
        </div>

        <div style="margin-bottom: 10px;">
            <label for="openingName" style="font-weight: bold;">Nome da Vaga:</label>
            <input type="text" id="openingName" th:field="*{openingName}" required style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" />
            <span th:if="${#fields.hasErrors('openingName')}" th:errors="*{openingName}" style="color: red;"></span>
        </div>

        <div style="margin-bottom: 10px;">
            <label for="openingDescription" style="font-weight: bold;">Descrição:</label>
            <textarea id="openingDescription" th:field="*{openingDescription}" required style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"></textarea>
            <span th:if="${#fields.hasErrors('openingDescription')}" th:errors="*{openingDescription}" style="color: red;"></span>
        </div>

        <div style="margin-bottom: 10px;">
            <label for="openingSalary" style="font-weight: bold;">Salário:</label>
            <input type="number" id="openingSalary" th:field="*{openingSalary}" required style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" />
            <span th:if="${#fields.hasErrors('openingSalary')}" th:errors="*{openingSalary}" style="color: red;"></span>
        </div>

        <div style="margin-bottom: 10px;">
            <label for="openingDate" style="font-weight: bold;">Data de Expiração:</label>
            <input type="date" id="openingDate" th:field="*{openingDate}" required style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" />
            <span th:if="${#fields.hasErrors('openingDate')}" th:errors="*{openingDate}" style="color: red;"></span>
        </div>

        <button type="submit" style="background-color: rgba(53, 135, 100, 0.84); color: white; padding: 10px 15px; border: none; border-radius: 4px;">Atualizar Vaga</button>

        <!-- Mensagem de sucesso ou erro -->
        <div th:if="${message}" style="color: green; margin-top: 10px;">
            <p th:text="${message}"></p>
        </div>
        <div th:if="${#fields.hasErrors()}" style="color: red; margin-top: 10px;">
            <p>Por favor, corrija os erros acima!</p>
        </div>
    </form>
</div>

</body>
</html>
